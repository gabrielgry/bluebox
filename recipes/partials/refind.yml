---
# yaml-language-server: $schema=https://schema.blue-build.org/module-list-v1.json

modules:
  - type: dnf
    install:
      packages:
        - rEFInd

  - type: files
    files:
      - source: system/refind
        destination: /

  - type: script
    snippets:
      - mkdir -p /usr/share/ublue-os/refind
      - git clone https://github.com/gabrielgry/refind-theme-oled.git /usr/share/ublue-os/refind/refind-theme-oled
      - rm -rf /usr/share/ublue-os/refind/refind-theme-oled/.git
      - rm -rf /usr/share/ublue-os/refind/README.md
      - find /usr/share/ublue-os/refind/refind-theme-oled/fonts -mindepth 1 -maxdepth 1 ! -name 'source-code-pro-extralight-14.png' -exec rm -rf {} +
      - find /usr/share/ublue-os/refind/refind-theme-oled/icons -mindepth 1 -maxdepth 1 ! -name '128-48' -exec rm -rf {} +
      - systemctl enable bluebox-refind-setup.service
